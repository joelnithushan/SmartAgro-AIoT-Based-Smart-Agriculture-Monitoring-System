const express = require('express');const cors = require('cors');const helmet = require('helmet');const morgan = require('morgan');require('dotenv').config();const deviceRequestRoutes = require('./routes/deviceRequests');const adminRoutes = require('./routes/admin');const chatRoutes = require('./routes/chat');const app = express();const PORT = process.env.PORT || 5000;app.use(helmet()); app.use(cors({  origin: [    'http:    'http:    'http:    process.env.FRONTEND_URL  ].filter(Boolean),  credentials: true}));app.use(morgan('combined')); app.use(express.json({ limit: '10mb' })); app.use(express.urlencoded({ extended: true })); app.get('/health', (req, res) => {  res.json({     status: 'OK',     timestamp: new Date().toISOString(),    environment: process.env.NODE_ENV || 'development'  });});app.use('/api/device', deviceRequestRoutes);app.use('/api/admin', adminRoutes);app.use('/api/chat', chatRoutes);app.use((err, req, res, next) => {  console.error('Error:', err);  res.status(err.status || 500).json({    success: false,    error: process.env.NODE_ENV === 'production'       ? 'Internal server error'       : err.message  });});app.use('*', (req, res) => {  res.status(404).json({    success: false,    error: 'Route not found'  });});app.listen(PORT, () => {  console.log(`SmartAgro Backend Server running on port ${PORT}`);  console.log(`Environment: ${process.env.NODE_ENV || 'development'}`);});module.exports = app;